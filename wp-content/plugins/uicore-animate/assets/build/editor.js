(()=>{"use strict";const e=window.wp.blockEditor,t=window.wp.components,a=window.wp.data,i=window.wp.element,n=window.wp.hooks,o=window.wp.i18n,l=window.ReactJSXRuntime;(0,n.addFilter)("editor.BlockEdit","uicore-animate/add-animation-controls",(n=>r=>{if(!r?.attributes)return(0,l.jsx)(n,{...r});const{attributes:s,setAttributes:u,name:c,clientId:m}=r;if(-1!==c.indexOf("uicore/"))return(0,l.jsx)(n,{...r});const{uiAnimateName:d,uiAnimateDuration:y,uiAnimateDelay:g,uiAnimateTrigger:b,uiAnimateDelayEnd:A}=s;return(0,i.useEffect)((()=>{"scroll"===b?((e,t)=>{const i=`uicore-animate-style-${e}`,{uiAnimateDelay:n,uiAnimateDelayEnd:o}=t;((e,t)=>{if(!e||!t)return;const i=(0,a.select)("core/editor").getEditorSettings(),n=i.styles.findIndex((e=>e.id===t)),o=-1!==n?i.styles[n]:null,l=o&&(o.css!==e||!o.isGlobalStyles);if(-1===n||l){const o=-1!==n?i.styles.map(((t,a)=>a===n?{...t,css:e,isGlobalStyles:!0}:t)):[...i.styles,{css:e,isGlobalStyles:!0,id:t}];(0,a.dispatch)("core/editor").updateEditorSettings({...i,styles:o})}})(`\n        .wp-block[data-block="${e}"] {\n\t\t\tanimation: .5s linear uicoreFadeIn both;\n\t\t\tanimation-timeline: view(block);\n            animation-range: entry ${n||"10"}vh entry ${o||"50"}vh;\n        }\n    `,i)})(m,s):(e=>{const t=`uicore-animate-style-${e}`,i=(0,a.select)("core/editor").getEditorSettings(),n=[...i.styles].filter((e=>e.id!==t));n.length!==i.styles.length&&(0,a.dispatch)("core/editor").updateEditorSettings({...i,styles:n})})(m)}),[d,g,A]),(0,l.jsxs)(i.Fragment,{children:[(0,l.jsx)(n,{...r}),(0,l.jsx)(e.InspectorControls,{children:(0,l.jsxs)(t.PanelBody,{className:"components-panel__body-toggle uicore-animate-panel",title:(0,o.__)("Animations","uicore-animate"),initialOpen:!1,children:[(0,l.jsx)(t.SelectControl,{label:(0,o.__)("Animation","uicore-animate"),value:d,options:[{label:(0,o.__)("None","uicore-animate"),value:""},...window.uicore_animations_list],onChange:e=>u({uiAnimateName:e})}),(0,l.jsx)(t.SelectControl,{label:(0,o.__)("Trigger","uicore-animate"),value:b,options:[{label:(0,o.__)("Scroll","uicore-animate"),value:"scroll"},{label:(0,o.__)("Entrance","uicore-animate"),value:"entrance"}],onChange:e=>u({uiAnimateTrigger:e})}),"scroll"!==b&&(0,l.jsx)(t.SelectControl,{label:(0,o.__)("Duration","uicore-animate"),value:y,options:[{label:(0,o.__)("Fast","uicore-animate"),value:"fast"},{label:(0,o.__)("Normal","uicore-animate"),value:""},{label:(0,o.__)("Slow","uicore-animate"),value:"slow"}],onChange:e=>u({uiAnimateDuration:e})}),(0,l.jsx)(t.TextControl,{label:"scroll"===b?(0,o.__)("Start Offset (vh)","uicore-animate"):(0,o.__)("Delay (ms)","uicore-animate"),value:g,placeholder:"scroll"===b?"10":"100",type:"number",onChange:e=>u({uiAnimateDelay:e})}),"scroll"===b?(0,l.jsx)(t.TextControl,{label:(0,o.__)("End Offset (vh)","uicore-animate"),value:A,placeholder:"50",type:"number",onChange:e=>u({uiAnimateDelayEnd:e})}):(0,l.jsx)(t.Button,{className:"button button-secondary",onClick:e=>{e.target.disabled=!0;let t=document.querySelector(`.wp-block[data-block="${m}"]`);if(!t){const e=window.parent.document.querySelector('iframe[name="editor-canvas"]'),a=e.contentDocument||e.contentWindow.document;t=a.querySelector(`.wp-block[data-block="${m}"]`)}t.classList.add("uicore-animate-hide"),setTimeout((()=>{t.classList.add(d),t.classList.remove("uicore-animate-hide"),"fast"===y?t.classList.add("animated","animated-fast"):"slow"===y?t.classList.add("animated","animated-slow"):t.classList.add("animated")}),50),setTimeout((()=>{t.classList.remove(d),e.target.disabled=!1}),2e3)},children:(0,o.__)("Play Animation","uicore-animate")})]})})]})})),(0,n.addFilter)("editor.BlockListBlock","uicore-animate/add-animation-class-and-style",(e=>t=>{if(!t?.attributes)return(0,l.jsx)(e,{...t});const{attributes:a}=t;if(-1!==t.block.name.indexOf("uicore/"))return(0,l.jsx)(e,{...t});if(a.uiAnimateName){const i={className:`${t.className} ${"scroll"===a.uiAnimateTrigger?"uicore-animate-scroll "+a.uiAnimateName:""}`};return(0,l.jsx)(e,{...t,...i})}return(0,l.jsx)(e,{...t})})),(0,n.addFilter)("blocks.registerBlockType","uicore-animate/add-animation-attribute",((e,t)=>(-1!==t.indexOf("uicore/")||(e.attributes={...e.attributes,uiAnimateTrigger:{type:"string",default:"entrance"},uiAnimateName:{type:"string",default:""},uiAnimateDuration:{type:"string",default:""},uiAnimateDelay:{type:"string",default:""},uiAnimateDelayEnd:{type:"string",default:""}}),e))),(0,n.addFilter)("blocks.getSaveContent.extraProps","uicore-animate/add-animation-data-attributes",((e,t,a)=>{if(-1!==t?.name?.indexOf("uicore/"))return e;if(a.uiAnimateName){const t=a.uiAnimateDelay||"10",i=a.uiAnimateDelayEnd||"50";e={...e,...""!==a.uiAnimateName&&{"data-ui-animation":a.uiAnimateName},..."scroll"!==a.uiAnimateTrigger&&{"data-ui-trigger":a.uiAnimateTrigger,...a.uiAnimateDuration?{"data-ui-duration":a.uiAnimateDuration}:{},...a.uiAnimateDelay?{"data-ui-delay":a.uiAnimateDelay}:{}},className:`${e.className} ${"scroll"===a.uiAnimateTrigger?"uicore-animate-scroll":"uicore-animate-hide"}`,style:{...e.style,..."scroll"===a.uiAnimateTrigger&&{"animation-range":`entry ${t}vh entry ${i}vh`}}}}return e}))})();